#!/bin/bash
# Bitwarden + ChezMoi Environment Template for OpenDiscourse

# This file is a template managed by chezmoi and populated via Bitwarden CLI
# DO NOT EDIT MANUALLY - Use chezmoi and Bitwarden to manage values

# Cloudflare Configuration
export CLOUDFLARE_ACCOUNT_ID="{{ (bitwarden "Cloudflare Account ID" | .fields | where (.name == "account_id") | first).value }}"
export CLOUDFLARE_API_TOKEN="{{ (bitwarden "Cloudflare API Token" | .fields | where (.name == "api_token") | first).value }}"

# Supabase Configuration
export NEXT_PUBLIC_SUPABASE_URL="{{ (bitwarden "Supabase OpenDiscourse" | .fields | where (.name == "url") | first).value }}"
export NEXT_PUBLIC_SUPABASE_ANON_KEY="{{ (bitwarden "Supabase OpenDiscourse" | .fields | where (.name == "anon_key") | first).value }}"
export NEXT_PUBLIC_SUPABASE_SERVICE_ROLE_KEY="{{ (bitwarden "Supabase OpenDiscourse" | .fields | where (.name == "service_role_key") | first).value }}"

# API Keys
export GOVINFO_API_KEY="{{ (bitwarden "GOVINFO API Key").notes }}"
export OPENAI_API_KEY="{{ (bitwarden "OpenAI API Key").notes }}"

# Database URLs
export POSTGRES_URL="{{ (bitwarden "PostgreSQL Database" | .fields | where (.name == "connection_string") | first).value }}"
export SUPABASE_POSTGRES_URL="{{ (bitwarden "Supabase Database" | .fields | where (.name == "postgres_connection") | first).value }}"

# Development Secrets
export SESSION_SECRET="{{ (bitwarden "Session Secret").notes }}"
export JWT_SECRET="{{ (bitwarden "JWT Secret").notes }}"
